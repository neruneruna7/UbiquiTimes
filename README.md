# UbiquiTimes
`Timesはもう，どこにでもいます．`

UbiquiTimesは，DiscordにおいてTimesを共有/拡散するためのBotです．

## コンセプト/思想
- **偏在**
- オープンソース
- カスタマイズ可能
- サーバ/コミュニティの運営側が管理可能



オープンソースとしてのDiscordBotを目指しています．

このBotは，それぞれのサーバで独立してホストすることを前提としています．

それはなぜか？ Botをそれぞれがカスタマイズすることを容易にするためです．もしもカスタマイズごとに，新たにTimes拡散/共有Botをサーバに導入するとしたら，どうなるでしょうか．メンバーリストはこうなるでしょう
```
@bot1
@bot2
@bot3
@bot4
@bot5
...
```
導入している拡散/共有Botの数が増えていってしまいます  
`多すぎる...修正が必要だ...`

それゆえ，UbiquiTimesは，サーバごとに独立してホストすることを前提としています．

## 使い方
### 必要な権限
- `Manage Webhooks`
- `Manage Messages`

### 初期設定
サーバの管理者・運営が設定することになるでしょう．
- 専用チャンネル（UtBot）作成
- マスターウェブフック作成
- サーバ名，マスターウェブフックを登録

1. このBot専用のチャンネルを作成してください．
このチャンネルにはbotからのメッセージが流されます.
`UtBot`などの名前がいいでしょう．

2. そのチャンネルのwebhookを作成してください．マスターウェブフックと呼称することにします．

3. `ut_set_own_masterhook`スラッシュコマンドを使用し，サーバ名とマスターウェブフックのURLを入力，登録してください．

これで初期設定は完了です．
```
サーバ名は，他のサーバと重複することを許容しています．
もしも既にあるサーバ・コミュニティと名前が被っていても，問題ありません．
```

### 拡散可能設定
他のどのサーバにTimesを拡散できるようにするのかを設定します．サーバの管理者・運営が設定することになるでしょう．

`ut_set_other_masterhook`スラッシュコマンドを使用し，拡散可能なサーバのマスターウェブフックを登録します．  
この際に必要な情報は
- 相手のマスターウェブフックのURL
- 相手のサーバID（GUILD_ID）
- 相手のサーバ名
です.

```
相手のサーバ名を入力するのは，人間が識別しやすくするためのものです．相手サーバが初期設定で入力した名前と異なっていても問題ありません．

今後必要な情報は増える可能性があります．詳細は省きますが，おそらく相手サーバの公開鍵を登録することになるでしょう．
```

### 拡散設定
それぞれのメンバーが実行することになる部分です．  
いよいよTimesを拡散するための設定です．

1. `ut_times_set`スラッシュコマンドを，Timesを拡散したいすべてのサーバ（現在のサーバ含む）の，自身のTimesチャンネルにて実行してください．拡散時に使用する名前を入力することになります．

2. `ut_times_ubiqui_setting_send`スラッシュコマンドを拡散元のチャンネルで実行してください．疑似BOT間通信が行われ，自動的に拡散設定が行われます．
```
軽く説明すると，
- 拡散さきサーバにメッセージが送信される
- 拡散先サーバのBotはTimesチャンネルのwebhookを作成し，拡散元に返送
- それを受け取った拡散元サーバのbotは，webhookの登録をする．
```

3. `~UT`プレフィックスコマンド，または`ut_times_release`スラッシュコマンドを使用してみてください．
```
プレフィックスコマンドのほうが見やすいので，おすすめです．
```

## 設計
## インストール
## 欠点